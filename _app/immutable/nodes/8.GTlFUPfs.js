import"../chunks/DsnmJJEf.js";import{p as E,A as I,w as n,k as v,S as ft,a as t,b as O,f as g,c as Q,s as Mt,n as jt,r as W,v as s,x as f,y as _,z as ot}from"../chunks/BH8DMBu3.js";import{s as st}from"../chunks/BLVPUww8.js";import{p as T,c as r,s as nt,r as Z,b as Ft,i as zt}from"../chunks/v_Bvmvnk.js";import{e as Xt,B as N,i as Gt}from"../chunks/C8buxYmP.js";import{c as vt,a as Ht,s as Jt}from"../chunks/DQo-XWKF.js";import{A as Kt,a as Qt}from"../chunks/IVRF_fJR.js";import{I as Wt,g as Zt,a as te,b as ee,c as re,d as ae,C as oe,A as se,e as le,f as ne}from"../chunks/DnykwcQs.js";import{S as de}from"../chunks/Df-IJIcg.js";import{D as ie,f as ue,g as ce,h as Ut,X as fe,i as ve,j as $e,k as _e,S as ge,M as me,a as pe,b as he,c as xe,d as Pe,e as be,R as ye}from"../chunks/BMv-i9U5.js";import{P as we}from"../chunks/BQGB-iij.js";import{p as Dt,L as St}from"../chunks/B_QViUJN.js";import{g as lt}from"../chunks/NFEPWjS1.js";import{t as xt}from"../chunks/CX5p_vU5.js";function ke(p,e){E(e,!0);let o=T(e,"ref",15,null),u=Z(e,["$$slots","$$events","$$legacy","ref","class"]);var a=I(),m=n(a);{let i=ft(()=>vt("text-lg font-semibold leading-none",e.class));r(m,()=>ie,(P,b)=>{b(P,nt({"data-slot":"dialog-title",get class(){return v(i)}},()=>u,{get ref(){return o()},set ref(Y){o(Y)}}))})}t(p,a),O()}var De=g("<div><!></div>");function Se(p,e){E(e,!0);let o=T(e,"ref",15,null),u=Z(e,["$$slots","$$events","$$legacy","ref","class","children"]);var a=De();Ht(a,i=>({"data-slot":"dialog-footer",class:i,...u}),[()=>vt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e.class)]);var m=Q(a);Mt(m,()=>e.children??jt),W(a),Ft(a,i=>o(i),()=>o()),t(p,a),O()}var ze=g("<div><!></div>");function Ce(p,e){E(e,!0);let o=T(e,"ref",15,null),u=Z(e,["$$slots","$$events","$$legacy","ref","class","children"]);var a=ze();Ht(a,i=>({"data-slot":"dialog-header",class:i,...u}),[()=>vt("flex flex-col gap-2 text-center sm:text-left",e.class)]);var m=Q(a);Mt(m,()=>e.children??jt),W(a),Ft(a,i=>o(i),()=>o()),t(p,a),O()}function Ae(p,e){E(e,!0);let o=T(e,"ref",15,null),u=Z(e,["$$slots","$$events","$$legacy","ref","class"]);var a=I(),m=n(a);{let i=ft(()=>vt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e.class));r(m,()=>ue,(P,b)=>{b(P,nt({"data-slot":"dialog-overlay",get class(){return v(i)}},()=>u,{get ref(){return o()},set ref(Y){o(Y)}}))})}t(p,a),O()}var Ie=g('<!> <span class="sr-only">Close</span>',1),Ye=g("<!> <!>",1),Be=g("<!> <!>",1);function Le(p,e){E(e,!0);let o=T(e,"ref",15,null),u=T(e,"showCloseButton",3,!0),a=Z(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children","showCloseButton"]);var m=I(),i=n(m);r(i,()=>je,(P,b)=>{b(P,nt(()=>e.portalProps,{children:(Y,qt)=>{var M=Be(),x=n(M);r(x,()=>Ae,(X,B)=>{B(X,{})});var S=s(x,2);{let X=ft(()=>vt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed left-[50%] top-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e.class));r(S,()=>ce,(B,dt)=>{dt(B,nt({"data-slot":"dialog-content",get class(){return v(X)}},()=>a,{get ref(){return o()},set ref(tt){o(tt)},children:(tt,it)=>{var G=Ye(),et=n(G);Mt(et,()=>e.children??jt);var ut=s(et,2);{var j=q=>{var J=I(),F=n(J);r(F,()=>Ut,(H,rt)=>{rt(H,{class:"ring-offset-background focus:ring-ring rounded-xs focus:outline-hidden absolute end-4 top-4 opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",children:(U,z)=>{var k=Ie(),L=n(k);fe(L,{}),f(2),t(U,k)},$$slots:{default:!0}})}),t(q,J)};zt(ut,q=>{u()&&q(j)})}t(tt,G)},$$slots:{default:!0}}))})}t(Y,M)},$$slots:{default:!0}}))}),t(p,m),O()}function Re(p,e){E(e,!0);let o=T(e,"ref",15,null),u=Z(e,["$$slots","$$events","$$legacy","ref","class"]);var a=I(),m=n(a);{let i=ft(()=>vt("text-muted-foreground text-sm",e.class));r(m,()=>ve,(P,b)=>{b(P,nt({"data-slot":"dialog-description",get class(){return v(i)}},()=>u,{get ref(){return o()},set ref(Y){o(Y)}}))})}t(p,a),O()}function Ne(p,e){E(e,!0);let o=T(e,"ref",15,null),u=Z(e,["$$slots","$$events","$$legacy","ref"]);var a=I(),m=n(a);r(m,()=>$e,(i,P)=>{P(i,nt({"data-slot":"dialog-trigger"},()=>u,{get ref(){return o()},set ref(b){o(b)}}))}),t(p,a),O()}function Te(p,e){E(e,!0);let o=T(e,"ref",15,null),u=Z(e,["$$slots","$$events","$$legacy","ref"]);var a=I(),m=n(a);r(m,()=>Ut,(i,P)=>{P(i,nt({"data-slot":"dialog-close"},()=>u,{get ref(){return o()},set ref(b){o(b)}}))}),t(p,a),O()}const Me=_e,je=we;var qe=g("<!> <!> <!> <!> <!> <!>",1),Fe=g("<!> <!>",1),He=g("<!> <!>",1),Ue=g("<a><!></a>"),Ve=g("<!> <!>",1),Ee=g("<!> <!> <!>",1),Oe=g('<!> <div class="text-sm text-muted-foreground"> </div> <!>',1),Xe=g("<!> <!>",1),Ge=g("<!> <!>",1),Je=g("<!> <!>",1),Ke=g('<!> <div class="text-sm text-muted-foreground"> </div> <!> <div class="text-sm text-muted-foreground"> </div> <!> <!> <!>',1),Qe=g("<!> <!>",1),We=g('<div class="flex w-full flex-col gap-2 px-4"><!></div>'),Ze=g('<div class="pr-3 pt-8 pl-3 font-mono"><h1 class="text-3xl mb-4"><b>View Tasks</b></h1> <!> <!> <!></div>');function $r(p,e){E(e,!0);let o=T(e,"records",7);const u=Dt.authStore.record;u||(xt.error("You must be logged in"),lt("/login"));async function a(){Dt.authStore.clear(),await lt("/login")}async function m(){if(!u)return xt.error("You must be logged in");o(await Dt.collection("status").getFullList({filter:`user="${u.id}"`,sort:"-created",expand:"task,task.uploaded_by"}))}m();async function i(M){if(!u){xt.error("You must be logged in"),lt("/login");return}try{await Dt.collection("status").delete(M),xt.success("Success!"),o(o().filter(x=>x.id!==M))}catch(x){xt.error("Failed to cancel offer: "+x.message),console.error(x)}}var P=Ze(),b=s(Q(P),2);de(b,{});var Y=s(b,2);r(Y,()=>ye,(M,x)=>{x(M,{children:(S,X)=>{var B=He(),dt=n(B);r(dt,()=>ge,(it,G)=>{G(it,{children:(et,ut)=>{N(et,{size:"icon",variant:"outline",class:"rounded-full absolute top-7 right-4","aria-label":"menu",children:(j,q)=>{me(j,{})},$$slots:{default:!0}})},$$slots:{default:!0}})});var tt=s(dt,2);r(tt,()=>pe,(it,G)=>{G(it,{children:(et,ut)=>{var j=Fe(),q=n(j);r(q,()=>he,(F,H)=>{H(F,{children:(rt,U)=>{var z=qe(),k=n(z);r(k,()=>xe,(d,h)=>{h(d,{children:($,A)=>{f();var l=_("MENU");t($,l)},$$slots:{default:!0}})});var L=s(k,2);r(L,()=>Pe,(d,h)=>{h(d,{children:($,A)=>{f();var l=_("Navigate through the app using the options below.");t($,l)},$$slots:{default:!0}})});var C=s(L,2);N(C,{variant:"outline",type:"button",onclick:()=>{lt("/home")},children:(d,h)=>{f();var $=_("Home");t(d,$)},$$slots:{default:!0}});var D=s(C,2);N(D,{variant:"outline",type:"button",onclick:()=>{lt("/upload")},children:(d,h)=>{f();var $=_("New Request");t(d,$)},$$slots:{default:!0}});var R=s(D,2);N(R,{variant:"outline",type:"button",onclick:()=>{lt("/view_tasks")},children:(d,h)=>{f();var $=_("View Tasks");t(d,$)},$$slots:{default:!0}});var at=s(R,2);N(at,{variant:"outline",type:"button",onclick:()=>{lt("/your_tasks")},children:(d,h)=>{f();var $=_("Your Tasks");t(d,$)},$$slots:{default:!0}}),t(rt,z)},$$slots:{default:!0}})});var J=s(q,2);r(J,()=>be,(F,H)=>{H(F,{children:(rt,U)=>{N(rt,{variant:"outline",type:"button",class:"color-red",onclick:a,children:(z,k)=>{f();var L=_("Logout");t(z,L)},$$slots:{default:!0}})},$$slots:{default:!0}})}),t(et,j)},$$slots:{default:!0}})}),t(S,B)},$$slots:{default:!0}})});var qt=s(Y,2);Xt(qt,17,o,Gt,(M,x)=>{const S=ft(()=>v(x).expand.task),X=ft(()=>v(S)?.expand?.uploaded_by);var B=We(),dt=Q(B);r(dt,()=>ne,(tt,it)=>{it(tt,{class:"w-full max-w-sm mx-auto space-y-2",children:(G,et)=>{var ut=Qe(),j=n(ut);r(j,()=>Wt,(J,F)=>{F(J,{variant:"outline",children:(H,rt)=>{var U=Ee(),z=n(U);r(z,()=>Zt,(C,D)=>{D(C,{children:(R,at)=>{var d=I(),h=n(d);r(h,()=>Kt,($,A)=>{A($,{class:"size-10",children:(l,y)=>{var c=Ue(),w=Q(c);r(w,()=>Qt,($t,_t)=>{_t($t,{children:(Pt,V)=>{f();var K=_();ot(ct=>st(K,ct),[()=>v(X)?.username?.[0]?.toUpperCase()]),t(Pt,K)},$$slots:{default:!0}})}),W(c),ot(()=>Jt(c,"href","/profile/"+v(X)?.username)),t(l,c)},$$slots:{default:!0}})}),t(R,d)},$$slots:{default:!0}})});var k=s(z,2);r(k,()=>te,(C,D)=>{D(C,{children:(R,at)=>{var d=Ve(),h=n(d);r(h,()=>ee,(A,l)=>{l(A,{children:(y,c)=>{f();var w=_();ot(()=>st(w,v(S)?.title)),t(y,w)},$$slots:{default:!0}})});var $=s(h,2);r($,()=>re,(A,l)=>{l(A,{children:(y,c)=>{f();var w=_();ot(()=>st(w,`Status: ${v(x).status??""}`)),t(y,w)},$$slots:{default:!0}})}),t(R,d)},$$slots:{default:!0}})});var L=s(k,2);r(L,()=>ae,(C,D)=>{D(C,{children:(R,at)=>{var d=I(),h=n(d);r(h,()=>oe,($,A)=>{A($,{children:(l,y)=>{N(l,{size:"icon",variant:"outline",class:"rounded-full",children:(c,w)=>{se(c,{})},$$slots:{default:!0}})},$$slots:{default:!0}})}),t(R,d)},$$slots:{default:!0}})}),t(H,U)},$$slots:{default:!0}})});var q=s(j,2);r(q,()=>le,(J,F)=>{F(J,{class:"space-y-2 rounded-md border px-4 py-3 font-mono w-full",children:(H,rt)=>{var U=Ke(),z=n(U);St(z,{children:(l,y)=>{f();var c=_("Description:");t(l,c)},$$slots:{default:!0}});var k=s(z,2),L=Q(k,!0);W(k);var C=s(k,2);St(C,{class:"text-sm",children:(l,y)=>{f();var c=_("Your Offer:");t(l,c)},$$slots:{default:!0}});var D=s(C,2),R=Q(D,!0);W(D);var at=s(D,2);{var d=l=>{var y=Oe(),c=n(y);St(c,{children:(V,K)=>{f();var ct=_("Private Note:");t(V,ct)},$$slots:{default:!0}});var w=s(c,2),$t=Q(w,!0);W(w);var _t=s(w,2);{var Pt=V=>{N(V,{class:"w-full",get href(){return`https://www.google.com/maps?q=${v(S).lat??""},${v(S).lng??""}`},children:(K,ct)=>{f();var gt=_("Location");t(K,gt)},$$slots:{default:!0}})};zt(_t,V=>{v(S).share_loc&&V(Pt)})}ot(()=>st($t,v(S)?.private_note)),t(l,y)};zt(at,l=>{v(x).status==="accepted"&&l(d)})}var h=s(at,2);St(h,{children:(l,y)=>{f();var c=_();ot(()=>st(c,`Posted by: ${v(X)?.username??""}`)),t(l,c)},$$slots:{default:!0}});var $=s(h,2);{var A=l=>{var y=I(),c=n(y);r(c,()=>Me,(w,$t)=>{$t(w,{children:(_t,Pt)=>{var V=Je(),K=n(V);r(K,()=>Ne,(gt,Ct)=>{Ct(gt,{class:"w-full",children:(At,Vt)=>{N(At,{class:"w-full",variant:"destructive",children:(bt,It)=>{f();var Yt=_("Remove Help");t(bt,Yt)},$$slots:{default:!0}})},$$slots:{default:!0}})});var ct=s(K,2);r(ct,()=>Le,(gt,Ct)=>{Ct(gt,{children:(At,Vt)=>{var bt=Ge(),It=n(bt);r(It,()=>Ce,(Bt,Lt)=>{Lt(Bt,{children:(Rt,Et)=>{var mt=Xe(),yt=n(mt);r(yt,()=>ke,(pt,ht)=>{ht(pt,{children:(wt,Tt)=>{f();var kt=_("Are you sure absolutely sure?");t(wt,kt)},$$slots:{default:!0}})});var Nt=s(yt,2);r(Nt,()=>Re,(pt,ht)=>{ht(pt,{children:(wt,Tt)=>{f();var kt=_("This action cannot be undone.");t(wt,kt)},$$slots:{default:!0}})}),t(Rt,mt)},$$slots:{default:!0}})});var Yt=s(It,2);r(Yt,()=>Se,(Bt,Lt)=>{Lt(Bt,{children:(Rt,Et)=>{var mt=I(),yt=n(mt);r(yt,()=>Te,(Nt,pt)=>{pt(Nt,{children:(ht,wt)=>{N(ht,{class:"w-full",variant:"destructive",type:"submit",onclick:()=>i(v(x).id),children:(Tt,kt)=>{f();var Ot=_("Yes, Confirm");t(Tt,Ot)},$$slots:{default:!0}})},$$slots:{default:!0}})}),t(Rt,mt)},$$slots:{default:!0}})}),t(At,bt)},$$slots:{default:!0}})}),t(_t,V)},$$slots:{default:!0}})}),t(l,y)};zt($,l=>{v(x).status!=="accepted"&&l(A)})}ot(()=>{st(L,v(S)?.description),st(R,v(x).offer)}),t(H,U)},$$slots:{default:!0}})}),t(G,ut)},$$slots:{default:!0}})}),W(B),t(M,B)}),W(P),t(p,P),O()}export{$r as component};
