import"./DsnmJJEf.js";import{S,k as d,R as I,W as T,p as A,A as _,w as b,a as m,b as C,s as x,f as z,c as D,n as L,r as O}from"./BH8DMBu3.js";import{p as l,i as W,r as k,c as j,s as B}from"./v_Bvmvnk.js";import{a as q,c as E}from"./DQo-XWKF.js";import{a as F,c as N,d as G,e as y,m as H}from"./Tsdtx6m7.js";import{C as Q,D as U}from"./BQGB-iij.js";const J=N({component:"avatar",parts:["root","image","fallback"]}),K=new Q("Avatar.Root");class M{static create(t){return K.set(new M(t))}opts;domContext;attachment;constructor(t){this.opts=t,this.domContext=new U(this.opts.ref),this.loadImage=this.loadImage.bind(this),this.attachment=F(this.opts.ref)}loadImage(t,s,o){if(this.opts.loadingStatus.current==="loaded")return;let e;const r=new Image;return r.src=t,s!==void 0&&(r.crossOrigin=s),o&&(r.referrerPolicy=o),this.opts.loadingStatus.current="loading",r.onload=()=>{e=this.domContext.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},r.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{e&&this.domContext.clearTimeout(e)}}#t=S(()=>({id:this.opts.id.current,[J.root]:"","data-status":this.opts.loadingStatus.current,...this.attachment}));get props(){return d(this.#t)}set props(t){I(this.#t,t)}}class R{static create(t){return new R(t,K.get())}opts;root;attachment;constructor(t,s){this.opts=t,this.root=s,this.attachment=F(this.opts.ref)}#t=S(()=>this.root.opts.loadingStatus.current==="loaded"?{display:"none"}:void 0);get style(){return d(this.#t)}set style(t){I(this.#t,t)}#a=S(()=>({style:this.style,"data-status":this.root.opts.loadingStatus.current,[J.fallback]:"",...this.attachment}));get props(){return d(this.#a)}set props(t){I(this.#a,t)}}var V=z("<div><!></div>");function X(v,t){const s=T();A(t,!0);let o=l(t,"delayMs",3,0),e=l(t,"loadingStatus",15,"loading"),r=l(t,"id",19,()=>G(s)),c=l(t,"ref",15,null),u=k(t,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const f=M.create({delayMs:y(()=>o()),loadingStatus:y(()=>e(),a=>{e()!==a&&(e(a),t.onLoadingStatusChange?.(a))}),id:y(()=>r()),ref:y(()=>c(),a=>c(a))}),h=S(()=>H(u,f.props));var g=_(),w=b(g);{var n=a=>{var p=_(),P=b(p);x(P,()=>t.child,()=>({props:d(h)})),m(a,p)},i=a=>{var p=V();q(p,()=>({...d(h)}));var P=D(p);x(P,()=>t.children??L),O(p),m(a,p)};W(w,a=>{t.child?a(n):a(i,!1)})}m(v,g),C()}var Y=z("<span><!></span>");function Z(v,t){const s=T();A(t,!0);let o=l(t,"id",19,()=>G(s)),e=l(t,"ref",15,null),r=k(t,["$$slots","$$events","$$legacy","children","child","id","ref"]);const c=R.create({id:y(()=>o()),ref:y(()=>e(),n=>e(n))}),u=S(()=>H(r,c.props));var f=_(),h=b(f);{var g=n=>{var i=_(),a=b(i);x(a,()=>t.child,()=>({props:d(u)})),m(n,i)},w=n=>{var i=Y();q(i,()=>({...d(u)}));var a=D(i);x(a,()=>t.children??L),O(i),m(n,i)};W(h,n=>{t.child?n(g):n(w,!1)})}m(v,f),C()}function ot(v,t){A(t,!0);let s=l(t,"ref",15,null),o=l(t,"loadingStatus",15,"loading"),e=k(t,["$$slots","$$events","$$legacy","ref","loadingStatus","class"]);var r=_(),c=b(r);{let u=S(()=>E("relative flex size-8 shrink-0 overflow-hidden rounded-full",t.class));j(c,()=>X,(f,h)=>{h(f,B({"data-slot":"avatar",get class(){return d(u)}},()=>e,{get ref(){return s()},set ref(g){s(g)},get loadingStatus(){return o()},set loadingStatus(g){o(g)}}))})}m(v,r),C()}function nt(v,t){A(t,!0);let s=l(t,"ref",15,null),o=k(t,["$$slots","$$events","$$legacy","ref","class"]);var e=_(),r=b(e);{let c=S(()=>E("bg-muted flex size-full items-center justify-center rounded-full",t.class));j(r,()=>Z,(u,f)=>{f(u,B({"data-slot":"avatar-fallback",get class(){return d(c)}},()=>o,{get ref(){return s()},set ref(h){s(h)}}))})}m(v,e),C()}export{ot as A,nt as a};
